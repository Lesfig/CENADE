
    <div class="page-title">
      <%=consulta.id.nil? ? 'Nueva Consulta' : 'Editar Consulta'%>

      <div class="tool">
        <%= link_to '<i class="fa fa-list" data-toggle="tooltip" data-placement="bottom" title="Lista de Consultas"></i> '.html_safe, consultas_odontologicas_path %>
      </div>

    </div>
    <div class="form-content2">
    <%= simple_form_for consulta, html: {class: 'form-consulta', style: "width: 80%; margin-left: 140px;", :multipart => true }, remote: true do |consult|%>
      <div class="row">
        <!-- Si el form se renderiza desde la ficha, para agregar una consulta, paciente y area aparecen desactivados, con estos hidden_field se asegura que se envién sus respectivos id -->
        <% if from_ficha %>
          <%= consult.hidden_field :paciente_id%>
          <%= consult.hidden_field :area_id%>
        <% end %>
        <%= consult.input :paciente_id, collection: Paciente.all.collect { |a| [a.persona_full_name, a.id] }, label: '* Paciente', wrapper_html: { class: 'col-md-3' }, input_html: { class: 'required select-paciente select2 paciente-id', disabled: consulta.paciente_id.nil? ? false : true} %>

        <%= consult.input :area_id, collection: Area.all.collect { |a| [a.nombre, a.id] }, label: '* Área', wrapper_html: { class: 'col-md-3'}, input_html: { class: 'required select-area select2', disabled: consulta.paciente_id.nil? ? false : true} %>


        <%= consult.input :doctor_id, collection: Doctor.all.collect { |a| [a.abr_profesion+" "+a.persona_full_name+"-"+ a.area.nombre, a.id] }, label: '* Prof. de la Salud', wrapper_html: { class: 'col-md-3' }, input_html:  { class: 'required select-doctor select2'} %>

        <%= consult.input :fecha, as: :string, label: '* Fecha', wrapper_html: { class: 'col-md-3'}, input_html: { class: 'datepicker dateLessSystemDate required', maxLength: Domain::FECHA, value:Formatter.format_date(consulta.fecha)} %>

      </div>
      <div id="paciente-data">
        <%= render 'form_paciente', paciente: paciente %>
      </div>

      <h4>Datos de Consulta</h4>
      <hr>
      <div class="row">
        <%= consult.input :motivo_consulta, as: :text, label: 'Motivo de Consulta', wrapper_html: { class: 'col-md-12'}, input_html: { maxLength: Domain::DESC250, class: 'biglength', rows: "2"} %>
      </div>

      <div class="row">
         <%= consult.input :observaciones, as: :text, label: 'Observaciones', wrapper_html: { class: 'col-md-12'}, input_html: { maxLength: Domain::DESC250, class: 'longString', rows: "2"} %>
      </div>

      <div class="row">
        <%= consult.input :servicio_cenade, as: :text, label: 'Servicio que utiliza en el CENADE', wrapper_html: { class: 'col-md-6'}, input_html: { maxLength: Domain::DESC300, class: 'biglength', rows: "2"} %>

        <%= consult.input :medicacion_actual, as: :text, label: 'Medicacion Actual', wrapper_html: { class: 'col-md-6'}, input_html: { maxLength: Domain::DESC250, class: 'maxlengthBig2', rows: "2"} %>
      </div>
      <h5>Es alérgico o ha reaccionado de manera adversa a:?</h5>
      <div class="row">
        <%= consult.input :anestesico, as: :string, label: 'Anestésico local', wrapper_html: { class: 'col-md-4'}, input_html: { maxLength: Domain::DESC50} %>

        <%= consult.input :penicilina, as: :string, label:'Penicilina', wrapper_html: { class: 'col-md-4'}, input_html: { maxLength: Domain::DESC50} %>

         <%= consult.input :otros_medicamentos, as: :string, label:'Otros medicamentos', wrapper_html: { class: 'col-md-4'}, input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class ="row">
          <%= consult.input :hemorragias, label: titulos_largos.find(7).titulo, wrapper_html: { class: 'col-md-6'}, input_html: { maxLength: Domain::DESC50} %>
          <%= consult.input :enfermedad_cardiovascular, label: titulos_largos.find(9).titulo, wrapper_html: { class: 'col-md-6'}, input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class ="row">
          <%= consult.input :problema_tratamiento, label: titulos_largos.find(8).titulo, wrapper_html: { class: 'col-md-12'}, input_html: { maxLength: Domain::DESC50} %>
      </div>

      <div class ="row">
        <%= consult.input :menstruacion, as: :string, label:'Paciente femenino: menstruación:', wrapper_html: { class: 'col-md-12'}, input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class ="row">
        <%= consult.input :embarazada, as: :string, label:'Está Embarazada?', wrapper_html: { class: 'col-md-12'}, input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class="row">
        <%= consult.input :tiene_hijos, as: :string, label: 'Tiene hijos?', wrapper_html: { class: 'col-md-4'}, input_html: { maxLength: Domain::DESC50} %>

        <%= consult.input :cantidad_hijos, as: :string, label:'cuantos:', wrapper_html: { class: 'col-md-4'}, input_html: { maxLength: Domain::DESC50} %>

         <%= consult.input :amamanta, as: :string, label:'amamanta?', wrapper_html: { class: 'col-md-4'}, input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class ="row">
        <%= consult.input :hospitalizado, as: :string, label: titulos_largos.find(10).titulo, wrapper_html: { class: 'col-md-4'}, input_html: { maxLength: Domain::DESC50} %>

        <%= consult.input :causa_hospitalizado, as: :string, label:'Causa', wrapper_html: { class: 'col-md-8'}, input_html: { maxLength: Domain::DESC50} %>
      </div>

      <h4>Exámenes Complementarios</h4><hr>

      <div class="row">
        <%= consult.input :ecg, label: 'ECG', wrapper_html: { class: 'col-md-12'},input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class="row">
        <%= consult.input :tac, label: 'TAC', wrapper_html: { class: 'col-md-12'},input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class="row">
        <%= consult.input :rx, label: 'RX', wrapper_html: { class: 'col-md-12'},input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class="row">
        <%= consult.input :laboratorios, label: 'Laboratorios', wrapper_html: { class: 'col-md-12'},input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class="row">
        <%= consult.input :otros_examenes, label: 'Otros Exámenes', wrapper_html: { class: 'col-md-12'},input_html: { maxLength: Domain::DESC50} %>
      </div>
      <div class="row">
        <%= consult.input :tratamiento,as: :text ,label: 'Tratamiento', wrapper_html: { class: 'col-md-12'},input_html: { maxLength: Domain::DESC250} %>
      </div>
      <div class="form-button">
        <%= consult.submit 'Guardar', class: 'btn btn-custom'%>
      </div>
    <% end %>
  </div>
<script type="text/javascript">
  consultasOdontologicasUI.initScript();

  <% if !flash.notice.blank? %>
    var n = noty({text: '<%=notice%>', type: 'success'});
  <% end %>

  <% if !flash.alert.blank?%>
    var n = noty({text: '<%=alert%>', type: 'error'});
  <% end %>
</script>
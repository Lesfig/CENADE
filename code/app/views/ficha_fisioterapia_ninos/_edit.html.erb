<div class="form-content form-ficha">
    <div class="page-title page-title-ficha">
      <%=@fisio_nino_nuevo.nil? ? 'Editar Ficha': 'Nueva Ficha' %> 

      <div class="tool">
        <%= link_to '<i class="fa fa-list"></i> '.html_safe, ficha_fisioterapia_ninos_path %> 
      </div>

    </div>

    <%= form_for @fisio_nino, html: {class: 'form-ficha', :multipart => true }, remote: true do |ficha|%>
      <%= hidden_field_tag :ficha_fisioterapia_nino_id, @fisio_nino.id %>
      <h4 align="center">FICHA FISIOTERAPIA PEDIÁTRICA</h4></br>
      <div class="row">
        <div class="col-md-5">


          <%= ficha.label :paciente_id, '* Paciente' %> 

          <%= ficha.select(:paciente_id, Hash[Paciente.all.map{|a| [a.persona.nombre + " "+ a.persona.apellido, a.id]}],{},{class: "paciente_select form-control select2 uniquePACIENTE", required: true,  id: 'paciente_id'})%>

          </div>

        <div class="col-md-4">
          <%= ficha.label :doctor_id, '* Profesional de la Salud' %>
          <%= ficha.select(:doctor_id, Hash[Empleado.where(type: 'Doctor', area_id: 2).map{|a| [a.abr_profesion + " "+ a.persona.nombre + " "+ a.persona.apellido, a.id]}],{},{class: "profesional_select form-control select2", required: true,  id: 'doctor_id'})%>
        </div>   
        <%= FormBuilder::text_field_v(ficha, :fecha, 
                                      input_class: 'date datepicker required', 
                                      max_length: Domain::FECHA,
                                      label_text: '* Fecha',
                                      col_class: 'col-md-3')%>
     </div>
      <h4>Datos del Paciente</h4>
      <hr>
    

          <div class ="paciente_data">
          <div class="row">

            <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'paciente-nombre', 
                                          col_class: 'col-md-4',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.nombre,
                                          label_text: 'Nombres') %>

            <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'paciente-apellido', 
                                          col_class: 'col-md-4',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.apellido,
                                          label_text: 'Apellidos') %>

            <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'paciente-apellido', 
                                          col_class: 'col-md-2',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.fecha_nacimiento,
                                          label_text: 'Fecha de nac.') %>

            <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'clear', 
                                          
                                          col_class: 'col-md-2',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.edad,
                                          label_text: 'Edad') %> 
            </div>      
            <div class="row">
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'clear', 
                                          col_class: 'col-md-4',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.sexo,
                                          label_text: 'Sexo') %> 
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'clear paciente-ci',
                                          col_class: 'col-md-3',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.ci,
                                          label_text: 'CI') %>
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'clear', 
                                          col_class: 'col-md-5',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.nacionalidad,
                                          label_text: 'Nacionalidad') %>  
              
          </div>
          <div class="row">
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'clear', 
                                          col_class: 'col-md-9',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.direccion,
                                          label_text: 'Dirección') %> 
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: 'clear paciente-ci',
                                          col_class: 'col-md-3',
                                          disabled: true,
                                          input_value: @fisio_nino.paciente.persona.telefono,
                                          label_text: 'Teléfono') %>
                
              
          </div>

   
      </div>
    </br>
     <h4>Datos de Encargados</h4>
    <hr>
    <%if @fisio_nino.paciente.encargado.nil? %>
    <div class="encargado_data">
      <div class="row">
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: '', 
                                          col_class: 'col-md-4',
                                          disabled: true,
                                          input_value: '',
                                          label_text: 'Madre') %> 
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: '',
                                          col_class: 'col-md-2',
                                          disabled: true,
                                          input_value: '',
                                          label_text: 'Edad') %>
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: '',
                                          col_class: 'col-md-4',
                                          disabled: true,
                                          input_value: '',
                                          label_text: 'Profesión') %>
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: '',
                                          col_class: 'col-md-2',
                                          disabled: true,
                                          input_value: '',
                                          label_text: 'Nro de Hijos') %>
                
              
    </div>
     <div class="row">
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: '', 
                                          col_class: 'col-md-5',
                                          disabled: true,
                                          input_value: '',
                                          label_text: 'Padre') %> 
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: '',
                                          col_class: 'col-md-2',
                                          disabled: true,
                                          input_value: '',
                                          label_text: 'Edad') %>
              <%= FormBuilder::text_field_v(ficha, :paciente_id, 
                                          input_class: '',
                                          col_class: 'col-md-5',
                                          disabled: true,
                                          input_value: '',
                                          label_text: 'Profesión') %>
              
    </div>
    </div>
     <h4>Embarazo</h4>
    <hr>
    <div class="row">
              <%= FormBuilder::text_field_v(ficha, :control_embarazo, 
                                          input_class: '',
                                          col_class: 'col-md-5',
                                          label_text: 'Control Prenatal') %> 
              <%= FormBuilder::text_field_v(ficha, :edad_gestacional, 
                                          input_class: '',
                                          col_class: 'col-md-3',
                                          label_text: 'Edad Gestacional') %>
              <%= FormBuilder::text_field_v(ficha, :tipo_parto, 
                                          input_class: '',
                                          col_class: 'col-md-4',
                                          label_text: 'Tipo de Parto') %>
              
    </div>
    <%else%>
      <%= render 'encargado_form'%>
    <%end%>
    <h4>Datos de la Ficha</h4>
    <hr>
    <div class="row">
              <%= FormBuilder::text_field_v(ficha, :peso_nacer, 
                                          input_class: '', 
                                          col_class: 'col-md-2',
                                          label_text: 'Peso al Nacer') %> 
              <%= FormBuilder::text_field_v(ficha, :apgar, 
                                          input_class: '',
                                          col_class: 'col-md-3',
                                          label_text: 'Apgar') %>
              <%= FormBuilder::text_field_v(ficha, :antecedentes_familiares, 
                                          input_class: ' ',
                                          col_class: 'col-md-7',
                                          label_text: 'Antecedentes Familiares') %>
              
    </div>
    <div class="row">
      <div class="col-md-12">
        <%= ficha.label :condicion_general, 'Condiciones Generales del Recién Nacido' %> 
        <%= ficha.text_area :condicion_general, rows: "5", class: "form-control"%> 
      </div>
    </div>
      </br>
      <div class="form-button">         
        <%= ficha.submit 'Guardar', class: 'btn btn-custom'%>
      </div>

    <% end %>


  </div>

<script type="text/javascript"> 
    
  fisioNinosUI.initScript("<%= ficha_fisioterapia_ninos_check_paciente_id_path%>");
  <% if !flash.notice.blank? %> 
    var n = noty({text: '<%=notice%>', type: 'success'});   
  <% end %>
  
  <% if !flash.alert.blank?%> 
    var n = noty({text: '<%=alert%>', type: 'error'});
  <% end %>
</script>
<div class= "col-md-10 col-md-offset-1">
  <div class="form-content">
    <div class="page-title">
      <%=@turno.id.nil? ? 'Nuevo Turno' : 'Editar Turno'%> 

      <div class="tool">
        <%= link_to '<i class="fa fa-list"></i> '.html_safe, turnos_path %> 
      </div>
    </div>

    <%= form_for @turno, html: {class: 'nuevo-turno'}, remote: true do |turno|%>   

      <h4>Datos Personales</h4>
      <hr>
      <div class="row">
              <div class="col-md-7">

              <%= turno.label :paciente_id, '* Paciente' %> 

              <%= turno.select(:paciente_id, Paciente.all.collect { |p| [p.persona.nombre, p.id] },{},{class: "form-control", required: true, id: 'paciente_select'})%>

              </div>
            
               <%= FormBuilder::text_field_v(turno, :fecha_expedicion, 
                            input_class: 'required date', 
                            max_length: Domain::FECHA,
                            label_text: '* Fecha Actual',
                            col_class: 'col-md-5')%>
            
       </div>

        <%= turno.hidden_field :paciente_id %>
        <%= render "add_paciente"%>
     <h4>Datos Turno</h4>
    <hr>
       
      <div class="form-button">         
        <%= turno.submit 'Guardar', class: 'btn btn-custom'%>
      </div>

    <% end %>


  </div>

</div>

<script type="text/javascript"> 
    $(document).ready(function(){
      $("#paciente_select").select2(
        placeholder: "Seleccione un paciente",
        language: "es"

      });
      $('#paciente_select').change(function() {
        $.ajax({
          url: "turnos/get_paciente",
          data: {
           id : $('#paciente_id').val()
          },
          dataType: "script"
        });
    });

  turnosUI.initScript();
</script>